mutate(Major_category = fct_reorder(Major_category, Median)) %>%
summarise(Median = median(Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
summarise(Median = median(Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
summarise(Median = median(Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
summarise(Median = median(Median)) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
summarise(Median = median(Median)) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median)
recent_grads %>%
+   arrange(desc(Median)) %>%
+   select(Major, Major_category, Median)
recent_grads %>% arrange(desc(Median)) %>%
+   select(Major, Major_category, Median)
recent_grads %>% arrange(desc(Median)) %>% select(Major, Major_category, Median)
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th)
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median)) +
geom_point() +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median)) +
geom_point() +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(10) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
expand_limits(y = 0) +
coord_flip()
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(10) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(P25th, P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(10) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
select(Major, Major_category, Median, P25th, P75th) %>%
tail(20) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(Median) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(Median) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
View(shelters)
View(recent_grads)
shelters
select(Major, Major_category, Median, P25th, 75th, Sample_size)
shelters %>%
arrange(Sample_size) %>%
select(Major, Major_category, Median, P25th, 75th, Sample_size)
shelters %>%
arrange(Sample_size) %>%
select(Major, Major_category, Median, P25th, P75th, Sample_size)
shelters %>%
arrange(Sample_size) %>%
select(Major, Major_category, Median, P25th, P75th, Sample_size)
shelters %>%
mutate(Sample_size = fct_reorder(Sample_size, Sample_size)) %>%
select(Major, Major_category, Median, P25th, P75th, Sample_size)
recent_grads %>%
arrange(Sample_size) %>%
select(Major, Major_category, Median, P25th, P75th, Sample_size)
recent_grads %>%
ggplot(Sample_size, Median) +
geom_point() +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
scale_x_log10()
install.packages("ggrepel")
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
ggrepel::geom_text_repel(aes(label = Major), check_overlap = TRUE)
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
ggrepel::geom_text(aes(label = Major), check_overlap = TRUE)
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
ggrepel::geom_text(aes(label = Major), check_overlap = TRUE) +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE) +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE, vjust = 1, hjust = 1) +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE, vjust = 1, hjust = 1) +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE, vjust = 1, hjust = 1) +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE, vjust = 1, hjust = 1) +
scale_x_log10()
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE, vjust = 1, hjust = 1) +
scale_x_log10()
theme_set(theme_light())
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, cache = TRUE)
theme_set(theme_light())
library(tidyverse)
library(scales)
recent_grads <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2018/2018-10-16/recent-grads.csv')
skimr::skim(recent_grads)
recent_grads %>%
ggplot(aes(Median)) +
geom_histogram()
recent_grads %>%
group_by(Major_category) %>%
summarise(Median = median(Median)) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = dollar_format()) +
coord_flip()
recent_grads %>%
group_by(Major_category) %>%
summarise(Median = median(Median)) %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_col() +
scale_y_continuous(labels = scales::dollar_format()) +
coord_flip()
recent_grads %>%
mutate(Major_category = fct_reorder(Major_category, Median)) %>%
ggplot(aes(Major_category, Median)) +
geom_boxplot() +
scale_y_continuous(labels = scales::dollar_format()) +
coord_flip()
recent_grads %>%
arrange(desc(Median)) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(Median) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Median)) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
arrange(Sample_size) %>%
select(Major, Major_category, Median, P25th, P75th, Sample_size)
recent_grads %>%
ggplot(aes(Sample_size, Median)) +
geom_point() +
geom_text(aes(label = Major), check_overlap = TRUE, vjust = 1, hjust = 1) +
scale_x_log10()
recent_grads %>%
filter(Sample_size >= 100) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
ggplot() %>%
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
filter(Sample_size >= 100) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
filter(Sample_size >= 100) %>%
head(20) %>%
select(Major, Major_category, Median, P25th, P75th) %>%
ggplot(aes(Major, Median, colour = Major_category)) +
geom_point() +
geom_errorbar(aes(ymin = P25th, ymax = P75th)) +
expand_limits(y = 0) +
coord_flip()
recent_grads %>%
count(Major_category, wt = Total, sort = TRUE) %>%
mutate(Major_category = fct_reorder(Major_category, n)) %>%
ggplot(aes(Major_category, n)) +
geom_col() +
coord_flip() +
labs( x = "",
y = "Total # of graduates")
recent_grads %>%
count(Major_category, wt = Total, sort = TRUE) %>%
mutate(Major_category = fct_reorder(Major_category, n)) %>%
ggplot(aes(Major_category, n, fill = Major_category)) +
geom_col() +
coord_flip() +
labs( x = "",
y = "Total # of graduates")
recent_grads %>%
count(Major_category, wt = Total, sort = TRUE) %>%
mutate(Major_category = fct_reorder(Major_category, n)) %>%
ggplot(aes(Major_category, n, fill = Major_category)) +
geom_col() +
coord_flip() +
labs( x = "",
y = "Total # of graduates") +
theme(legend.position = FALSE)
recent_grads %>%
count(Major_category, wt = Total, sort = TRUE) %>%
mutate(Major_category = fct_reorder(Major_category, n)) %>%
ggplot(aes(Major_category, n, fill = Major_category)) +
geom_col() +
coord_flip() +
labs( x = "",
y = "Total # of graduates") +
theme(legend.position = "none")
recent_grads %>%
gather(Gender, Number, Men, Women) %>%
select(Major, Gender, Number)
recent_grads %>%
arrange(desc(n)) %>%
head(20) %>%
gather(Gender, Number, Men, Women) %>%
select(Major, Gender, Number)
recent_grads %>%
arrange(desc(Total)) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Total)) %>%
gather(Gender, Number, Men, Women) %>%
select(Major, Gender, Number) %>%
ggplot(aes(Major, Number, fill = Gender)) +
geom_col() +
coord_flip()
recent_grads %>%
arrange(desc(Total)) %>%
head(20) %>%
mutate(Major = fct_reorder(Major, Total)) %>%
gather(Gender, Number, Men, Women) %>%
select(Major, Gender, Number) %>%
ggplot(aes(Major, Number, fill = Gender)) +
geom_col() +
coord_flip()
?summarise_at()
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women), sum, na.rm = TRUE) %>%
arrange(ShareWomen)
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women), sum, na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total)
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women), sum, na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women, MedianSalart = Median * Sample_size/ Sample_size), sum, na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women, MedianSalary = (Median * Sample_size)/ Sample_size), sum, na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women, MedianSalary = sum(Median * Sample_size)/ sum(Sample_size)), sum, na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
recent_grads %>%
group_by(Major_category) %>%
summarise_at(vars(Total, Men, Women, MedianSalary = sum(Median * Sample_size)/ sum(Sample_size)), sum, na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
by_major_category <- recent_grads %>%
group_by(Major_category) %>%
summarise(sum(Men),
sum(Women),
MedianSalary = sum(Median * Sample_size)/ sum(Sample_size),
na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
by_major_category <- recent_grads %>%
group_by(Major_category) %>%
summarise(sum(Men),
sum(Women),
MedianSalary = sum(Median * Sample_size)/ sum(Sample_size),
na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
by_major_category <- recent_grads %>%
group_by(Major_category) %>%
summarize(sum(Men),
sum(Women),
MedianSalary = sum(Median * Sample_size)/ sum(Sample_size),
na.rm = TRUE) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
by_major_category <- recent_grads %>%
filter(!is.na(Total)) %>%
group_by(Major_category) %>%
summarize(sum(Men),
sum(Women),
MedianSalary = sum(Median * Sample_size)/ sum(Sample_size)
) %>%
mutate(ShareWomen = Women/Total) %>%
arrange(desc(ShareWomen))
recent_grads %>%
select(Major, Total, ShareWomen, Sample_size, Median) %>%
lm(Median ~ shareWomenn, data = ., weights = Sample_size)
recent_grads %>%
select(Major, Total, ShareWomen, Sample_size, Median) %>%
lm(Median ~ shareWomen, data = ., weights = Sample_size)
recent_grads %>%
select(Major, Total, ShareWomen, Sample_size, Median) %>%
lm(Median ~ ShareWomen, data = ., weights = Sample_size)
recent_grads %>%
select(Major, Total, ShareWomen, Sample_size, Median) %>%
lm(Median ~ ShareWomen, data = ., weights = Sample_size)
recent_grads %>%
select(Major, Total, ShareWomen, Sample_size, Median) %>%
lm(Median ~ ShareWomen, data = ., weights = Sample_size) %>%
summary()
recent_grads %>%
select(Major, Major_category, Total, ShareWomen, Sample_size, Median) %>%
add_count(Major_category)
recent_grads %>%
select(Major, Major_category, Total, ShareWomen, Sample_size, Median) %>%
add_count(Major_category) %>%
filter(n >= 10) %>%
distinct(Major_category)
recent_grads %>%
select(Major, Major_category, Total, ShareWomen, Sample_size, Median) %>%
add_count(Major_category) %>%
filter(n >= 10) %>%
distinct(Major_category) %>%
nest(-Major_category) %>%
mutate(model = map(data, ~lm(Median ~ ShareWomen, data = ., weights = Sample_size)), tidied = map(model, tidy)) %>%
unnest(tidied) %>%
filter(term == "ShareWomen") %>%
arrange(estiamte)
